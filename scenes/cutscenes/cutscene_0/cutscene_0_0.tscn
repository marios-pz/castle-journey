[gd_scene load_steps=3 format=3 uid="uid://trgl0dbowos7"]

[ext_resource type="Texture2D" uid="uid://b887prm1knfst" path="res://scenes/cutscenes/cutscene_0/0.png" id="1_wopui"]

[sub_resource type="GDScript" id="GDScript_wopui"]
script/source = "extends Control

func _ready() -> void:
	# Get the GameManager's TextBubble
	var game_manager = get_node(\"/root/GameManager\")
	if game_manager and game_manager.text_bubble:
		# Show the opening cutscene text
		game_manager.text_bubble.show_texts(\"cutscene_0\")
		# Connect to text bubble completion
		game_manager.text_bubble.connect(\"text_completed\", _on_text_completed)
	else:
		print(\"Error: GameManager or TextBubble not found!\")

func _on_text_completed() -> void:
	# When text is completed, go to level 1
	# Use a timer to ensure we're still in the scene tree
	var timer = Timer.new()
	add_child(timer)
	timer.wait_time = 0.1
	timer.one_shot = true
	timer.timeout.connect(_change_to_level_1)
	timer.start()

func _change_to_level_1() -> void:
	# Try different approaches to change scene
	var tree = get_tree()
	if tree != null:
		tree.change_scene_to_file(\"res://scenes/levels/level_1/level_1.tscn\")
	else:
		print(\"Error: Cannot get tree!\")
"

[node name="Cutscene00" type="Control"]
layout_mode = 3
anchors_preset = 0
script = SubResource("GDScript_wopui")
metadata/cutscene_number = 0

[node name="0" type="Sprite2D" parent="."]
z_index = -1
position = Vector2(960, 540)
texture = ExtResource("1_wopui")
